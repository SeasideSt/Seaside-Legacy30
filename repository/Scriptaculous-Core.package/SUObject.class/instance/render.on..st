utilities
render: anObject on: aStream
	| document html previous |
	self requestContext rememberLoadScripts: [ 
		document := SUDocument new.
		document stream: aStream; open: nil.
		previous := canvas context document.
		canvas context document: document.
		html := canvas species
			context: canvas context
			callbacks: (canvas context callbacks).
		html render: anObject; flush.
		document close: nil.
		canvas context document: previous ]